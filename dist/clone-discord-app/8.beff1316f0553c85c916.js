(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{x5bZ:function(t,e,r){"use strict";r.r(e),r.d(e,"RegisterModule",function(){return S});var a=r("ofXK"),o=r("3Pt+"),n=r("tmjD"),i=r("NxI2"),s=r("6n7m"),b=r("7OSY"),l=r("FutI"),c=r("tyNb"),p=r("r6Vd"),u=r("LRne"),d=r("lJxs"),m=r("JIr8"),f=r("JgJg"),g=r("fXoL");let h=(()=>{class t extends f.a{resource(){return"auth"}register(t){return this.httpClient.post(this.uri+"/register",t)}userExistsByCPF(t){return this.httpClient.post(this.uri+"/register/checkCPF",{cpf:t})}}return t.\u0275fac=function(e){return w(e||t)},t.\u0275prov=g.Db({token:t,factory:t.\u0275fac}),t})();const w=g.Lb(h);var v=r("ahNA"),y=r("PwkD"),C=r("LJbi"),J=r("f7yR");function K(t,e){if(1&t&&(g.Kb(0,"div",4),g.Kb(1,"div",5),g.Kb(2,"app-alert",16),g.gc(3),g.Jb(),g.Jb(),g.Jb()),2&t){const t=g.Sb();g.wb(3),g.ic(" ",t.errorMessage," ")}}const k=function(){return["/login"]},x=[{path:"",component:(()=>{class t{constructor(t,e){this.registerService=t,this.router=e,this.submitLoading=!1,this.payload=new o.d({name:new o.b("",[o.l.required,o.l.minLength(4)]),password:new o.b("",[o.l.required,o.l.minLength(6)]),cpf:new o.b("",{validators:[o.l.required,o.l.minLength(14)],asyncValidators:this.validationUniqueCpf(),updateOn:"blur"})})}ngOnInit(){}get name(){return this.payload.get("name")}get cpf(){return this.payload.get("cpf")}get password(){return this.payload.get("password")}validationUniqueCpf(){return t=>this.registerService.userExistsByCPF(t.value).pipe(Object(d.a)(t=>{var e;return t.success&&(null===(e=null==t?void 0:t.content)||void 0===e?void 0:e.exists)?{anotherUserAlreadyTaken:!0}:null}),Object(m.a)(()=>Object(u.a)(null)))}informError(t){this.payload.reset(),this.errorMessage=t}submit(){this.payload.valid?(this.submitLoading=!0,this.registerService.register(this.payload.getRawValue()).subscribe(t=>{t.success&&t.content?this.router.navigate(["/login"],{state:{newUser:t.content}}):this.informError("Ops, aconteceu algum problema, tente novamente mais tarde!"),this.submitLoading=!1},t=>{this.informError("Ops, aconteceu algum problema, tente novamente mais tarde!"),this.submitLoading=!1})):this.payload.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(g.Hb(h),g.Hb(c.a))},t.\u0275cmp=g.Bb({type:t,selectors:[["app-register"]],features:[g.vb([h])],decls:22,vars:10,consts:[[3,"formGroup","ngSubmit"],["title","Crie sua conta"],["card-content",""],["class","row",4,"ngIf"],[1,"row"],[1,"col-xs-12"],["label","Nome Completo",3,"abstractControl"],["type","text","name","name","placeholder","Nome Completo","formControlName","name"],["label","CPF",3,"abstractControl"],["type","text","name","cpf","placeholder","CPF","formControlName","cpf",3,"mask","dropSpecialCharacters"],["label","Senha",3,"abstractControl"],["type","password","name","password","placeholder","Senha","formControlName","password","autocomplete","off"],["card-footer",""],["type","submit",1,"btn-block","btn-secondary",3,"loading"],[1,"login"],[3,"routerLink"],[1,"alert-danger"]],template:function(t,e){1&t&&(g.Kb(0,"form",0),g.Qb("ngSubmit",function(){return e.submit()}),g.Kb(1,"app-card",1),g.Kb(2,"div",2),g.fc(3,K,4,1,"div",3),g.Kb(4,"div",4),g.Kb(5,"div",5),g.Kb(6,"app-fieldrow",6),g.Ib(7,"input",7),g.Jb(),g.Jb(),g.Kb(8,"div",5),g.Kb(9,"app-fieldrow",8),g.Ib(10,"input",9),g.Jb(),g.Jb(),g.Kb(11,"div",5),g.Kb(12,"app-fieldrow",10),g.Ib(13,"input",11),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Kb(14,"div",12),g.Kb(15,"div",4),g.Kb(16,"div",5),g.Kb(17,"app-button",13),g.gc(18,"Criar Agora"),g.Jb(),g.Kb(19,"p",14),g.Kb(20,"a",15),g.gc(21,"J\xe1 tem uma conta?"),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Jb()),2&t&&(g.Xb("formGroup",e.payload),g.wb(3),g.Xb("ngIf",e.errorMessage&&e.errorMessage.length>=1),g.wb(3),g.Xb("abstractControl",e.name),g.wb(3),g.Xb("abstractControl",e.cpf),g.wb(1),g.Xb("mask","000.000.000-00")("dropSpecialCharacters",!1),g.wb(2),g.Xb("abstractControl",e.password),g.wb(5),g.Xb("loading",!1),g.wb(3),g.Xb("routerLink",g.Yb(9,k)))},directives:[o.m,o.j,o.e,v.a,a.k,y.a,o.a,o.i,o.c,n.a,C.a,c.b,J.a],styles:["[_nghost-%COMP%]{position:absolute;margin-left:-250px;left:50%}  .card-footer button{padding:15px!important}  .card-footer p.login{margin-top:10px}"]}),t})(),data:p.a.needsCredentials(!1)}];let L=(()=>{class t{}return t.\u0275mod=g.Fb({type:t}),t.\u0275inj=g.Eb({factory:function(e){return new(e||t)},imports:[[c.c.forChild(x)],c.c]}),t})(),S=(()=>{class t{}return t.\u0275mod=g.Fb({type:t}),t.\u0275inj=g.Eb({factory:function(e){return new(e||t)},imports:[[a.b,L,s.a,l.a,b.a,i.a,n.b.forRoot(),o.k]]}),t})()}}]);