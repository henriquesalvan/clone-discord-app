(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{X3zk:function(e,t,r){"use strict";r.r(t),r.d(t,"LoginModule",function(){return L});var o=r("ofXK"),a=r("3Pt+"),s=r("tmjD"),n=r("NxI2"),i=r("6n7m"),b=r("7OSY"),c=r("FutI"),d=r("tyNb"),l=r("r6Vd"),p=r("N4Vm"),u=r("UtGM"),g=r("fXoL"),m=r("4krI"),f=r("ahNA"),h=r("PwkD"),w=r("LJbi"),v=r("f7yR");function J(e,t){if(1&e&&(g.Kb(0,"div",4),g.Kb(1,"div",5),g.Kb(2,"app-alert",14),g.gc(3),g.Jb(),g.Jb(),g.Jb()),2&e){const e=g.Sb();g.wb(3),g.ic(" ",e.successMessage," ")}}function y(e,t){if(1&e&&(g.Kb(0,"div",4),g.Kb(1,"div",5),g.Kb(2,"app-alert",15),g.gc(3),g.Jb(),g.Jb(),g.Jb()),2&e){const e=g.Sb();g.wb(3),g.ic(" ",e.errorMessage," ")}}const K=function(){return["/register"]},C=[{path:"",component:(()=>{class e{constructor(e,t){this.router=e,this.loginService=t,this.submitLoading=!1,this.payload=new a.d({cpf:new a.b("",[a.l.required,a.l.minLength(14)]),password:new a.b("",[a.l.required,a.l.minLength(6)])})}ngOnInit(){var e;let t=null===(e=Object(p.b)().history.state)||void 0===e?void 0:e.newUser;t&&t.id&&(this.successMessage="Conta criada com sucesso!")}get cpf(){return this.payload.get("cpf")}get password(){return this.payload.get("password")}informError(e){this.payload.reset(),this.errorMessage=e,this.successMessage=void 0}submit(){this.payload.valid?(this.submitLoading=!0,this.loginService.login(this.payload.getRawValue()).subscribe(e=>{e.success&&e.content?(u.a.setToken(e.content),this.router.navigate(["/chat"])):this.informError("Ops, aconteceu algum problema, tente novamente mais tarde!"),this.submitLoading=!1},e=>{var t,r;"Invalid user credentials"===(null===(r=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.errors[0])||void 0===r?void 0:r.message)?this.informError("CPF ou senha incorretos!"):this.informError("Ops, aconteceu algum problema, tente novamente mais tarde!"),this.submitLoading=!1})):this.payload.markAllAsTouched()}}return e.\u0275fac=function(t){return new(t||e)(g.Hb(d.a),g.Hb(m.a))},e.\u0275cmp=g.Bb({type:e,selectors:[["app-login"]],decls:21,vars:10,consts:[[3,"formGroup","ngSubmit"],["title","Fa\xe7a seu login"],["card-content",""],["class","row",4,"ngIf"],[1,"row"],[1,"col-xs-12"],["label","CPF",3,"abstractControl"],["type","text","name","cpf","placeholder","CPF","formControlName","cpf",3,"mask","dropSpecialCharacters"],["label","Senha",3,"abstractControl"],["type","password","name","password","placeholder","Senha","formControlName","password","autocomplete","off"],["card-footer",""],["type","submit",1,"btn-block","btn-secondary",3,"loading"],[1,"register"],[3,"routerLink"],[1,"alert-success"],[1,"alert-danger"]],template:function(e,t){1&e&&(g.Kb(0,"form",0),g.Qb("ngSubmit",function(){return t.submit()}),g.Kb(1,"app-card",1),g.Kb(2,"div",2),g.fc(3,J,4,1,"div",3),g.fc(4,y,4,1,"div",3),g.Kb(5,"div",4),g.Kb(6,"div",5),g.Kb(7,"app-fieldrow",6),g.Ib(8,"input",7),g.Jb(),g.Jb(),g.Kb(9,"div",5),g.Kb(10,"app-fieldrow",8),g.Ib(11,"input",9),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Kb(12,"div",10),g.Kb(13,"div",4),g.Kb(14,"div",5),g.Kb(15,"app-button",11),g.gc(16,"Continuar"),g.Jb(),g.Kb(17,"p",12),g.gc(18," Precisando de uma conta? "),g.Kb(19,"a",13),g.gc(20,"Registre-se"),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Jb()),2&e&&(g.Xb("formGroup",t.payload),g.wb(3),g.Xb("ngIf",t.successMessage&&t.successMessage.length>=1),g.wb(1),g.Xb("ngIf",t.errorMessage&&t.errorMessage.length>=1),g.wb(3),g.Xb("abstractControl",t.cpf),g.wb(1),g.Xb("mask","000.000.000-00")("dropSpecialCharacters",!1),g.wb(2),g.Xb("abstractControl",t.password),g.wb(5),g.Xb("loading",t.submitLoading),g.wb(4),g.Xb("routerLink",g.Yb(9,K)))},directives:[a.m,a.j,a.e,f.a,o.k,h.a,a.a,s.a,a.i,a.c,w.a,d.b,v.a],styles:["[_nghost-%COMP%]{position:absolute;margin-left:-250px;left:50%}  .card-footer button{padding:15px!important}  .card-footer p.register{margin-top:10px;color:#72767d}"]}),e})(),data:l.a.needsCredentials(!1)}];let k=(()=>{class e{}return e.\u0275mod=g.Fb({type:e}),e.\u0275inj=g.Eb({factory:function(t){return new(t||e)},imports:[[d.c.forChild(C)],d.c]}),e})(),L=(()=>{class e{}return e.\u0275mod=g.Fb({type:e}),e.\u0275inj=g.Eb({factory:function(t){return new(t||e)},imports:[[o.b,k,i.a,c.a,b.a,n.a,s.b.forRoot(),a.k]]}),e})()}}]);